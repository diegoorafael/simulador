<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compra vs. Assinatura - Comparador</title>
    <style>
        :root { --bg: #f4f4f9; --card: #ffffff; --text: #333; --primary: #059669; }
        [data-theme="dark"] { --bg: #111827; --card: #1f2937; --text: #f9fafb; --primary: #10b981; }
        
        body { background-color: var(--bg); color: var(--text); font-family: sans-serif; padding: 20px; transition: 0.3s; }
        .container { background: var(--card); padding: 25px; border-radius: 15px; max-width: 900px; margin: auto; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); }
        
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .input-group { margin-bottom: 12px; }
        label { display: block; font-size: 0.85rem; margin-bottom: 4px; opacity: 0.8; }
        input { width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #444; background: transparent; color: inherit; }
        
        button { width: 100%; padding: 12px; background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; margin-top: 15px; }
        
        .results-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px; }
        table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
        th, td { padding: 10px; border-bottom: 1px solid #444; text-align: right; }
        th { text-align: left; }
        .highlight { color: var(--primary); font-weight: bold; }
        
        .theme-btn { float: right; padding: 5px 10px; cursor: pointer; border-radius: 5px; border: 1px solid var(--primary); background: none; color: var(--text); }
    </style>
</head>
<body>

<button class="theme-btn" onclick="document.body.getAttribute('data-theme') === 'dark' ? document.body.removeAttribute('data-theme') : document.body.setAttribute('data-theme', 'dark')">üåô/‚òÄÔ∏è</button>

<div class="container">
    <h2>Comparativo: Compra (Investindo Sobra) vs. Assinatura</h2>
    
    <div class="grid">
        <div>
            <h3>Dados da Compra</h3>
            <div class="input-group"><label>Valor do Carro / Entrada (R$)</label><input type="number" id="valorCarro" value="100000"></div>
            <div class="input-group"><label>Seguro Anual (R$)</label><input type="number" id="seguro" value="3500"></div>
            <div class="input-group"><label>Manuten√ß√£o Mensal (R$)</label><input type="number" id="manutencao" value="250"></div>
            <div class="input-group"><label>SELIC / Rendimento Anual (%)</label><input type="number" id="selic" value="10.75"></div>
        </div>
        
        <div>
            <h3>Dados da Assinatura</h3>
            <div class="input-group"><label>Mensalidade Assinatura (R$)</label><input type="number" id="mensalidadeAssinatura" value="3500"></div>
            <div class="input-group"><label>Deprecia√ß√£o FIPE Anual (%)</label><input type="number" id="depreciacao" value="8"></div>
            <div class="input-group"><label>Infla√ß√£o Custos Anual (%)</label><input type="number" id="inflacao" value="5"></div>
        </div>
    </div>

    <button onclick="calcular()">Comparar Cen√°rios</button>

    <div class="results-grid">
        <div>
            <h4>Cen√°rio: Comprar Carro</h4>
            <p>O custo dilu√≠do (IPVA/Seguro/Manut) √© subtra√≠do da parcela de assinatura, e a "sobra" √© investida junto com o valor da entrada.</p>
            <table id="tabelaCompra">
                <thead><tr><th>Ano</th><th>Valor FIPE</th><th>Patrim√¥nio (Carro+Invest)</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>
        <div>
            <h4>Cen√°rio: Assinatura</h4>
            <p>O valor da entrada fica rendendo 100% na SELIC, mas voc√™ paga a mensalidade todo m√™s.</p>
            <table id="tabelaAssinatura">
                <thead><tr><th>Ano</th><th>Gasto Acumulado</th><th>Patrim√¥nio (Investimento)</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
</div>

<script>
function calcular() {
    // Inputs
    let valorInicial = parseFloat(document.getElementById('valorCarro').value);
    let mensalidadeAssinatura = parseFloat(document.getElementById('mensalidadeAssinatura').value);
    let seguroAnual = parseFloat(document.getElementById('seguro').value);
    let manutMes = parseFloat(document.getElementById('manutencao').value);
    let selicAnual = parseFloat(document.getElementById('selic').value) / 100;
    let depreciacaoAnual = parseFloat(document.getElementById('depreciacao').value) / 100;
    let inflacao = parseFloat(document.getElementById('inflacao').value) / 100;

    let selicMensal = Math.pow(1 + selicAnual, 1/12) - 1;
    
    // Vari√°veis de controle
    let fipeAtual = valorInicial;
    let invCompra = 0; // Come√ßa em 0 pois o dinheiro foi pro carro
    let invAssinatura = valorInicial; // Entrada fica rendendo
    let gastoAssinaturaTotal = 0;

    const tCompra = document.querySelector('#tabelaCompra tbody');
    const tAssina = document.querySelector('#tabelaAssinatura tbody');
    tCompra.innerHTML = ''; tAssina.innerHTML = '';

    for (let ano = 1; ano <= 5; ano++) {
        // L√≥gica de 12 meses para cada ano
        for (let m = 1; m <= 12; m++) {
            // COMPRA: Custos mensais
            let ipvaMensal = (fipeAtual * 0.04) / 12; // Base 4%
            let custoPropriedade = ipvaMensal + (seguroAnual / 12) + manutMes;
            
            // A "Sobra" (Diferen√ßa entre custo de ter e custo de assinar) vai pro investimento
            let sobra = mensalidadeAssinatura - custoPropriedade;
            invCompra = (invCompra + sobra) * (1 + selicMensal);

            // ASSINATURA:
            invAssinatura = (invAssinatura - mensalidadeAssinatura) * (1 + selicMensal);
            gastoAssinaturaTotal += mensalidadeAssinatura;
        }

        // Ajustes Anuais
        fipeAtual *= (1 - depreciacaoAnual);
        seguroAnual *= (1 + inflacao);
        manutMes *= (1 + inflacao);
        mensalidadeAssinatura *= (1 + inflacao);

        // Preencher tabelas
        tCompra.innerHTML += `<tr><td>${ano}¬∫</td><td>R$ ${fipeAtual.toFixed(0)}</td><td class="highlight">R$ ${(fipeAtual + invCompra).toFixed(0)}</td></tr>`;
        tAssina.innerHTML += `<tr><td>${ano}¬∫</td><td>R$ ${gastoAssinaturaTotal.toFixed(0)}</td><td class="highlight">R$ ${invAssinatura.toFixed(0)}</td></tr>`;
    }
}
</script>
</body>
</html>
